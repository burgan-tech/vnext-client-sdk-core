{
  "multiStageMode": "never",
  "defaultStage": "prod",
  "stages": [
    {
      "key": "prod",
      "title": "Production",
      "baseUrl": "https://api.burgan.com.tr/api/v1/",
      "wsUrl": "wss://ws.burgan.com.tr",
      "mqttUrl": "mqtts://mqtt.burgan.com.tr:8883",
      "configEndpoint": {
        "runtime": "v2",
        "level": "instance",
        "domain": "discovery",
        "workflow": "enviroment",
        "key": "mobile-app",
        "function": "enviroment",
        "requiredToken": [
          { "provider": "morph-idm-1fa", "token": "access" },
          { "provider": "morph-idm-device", "token": "access" }
        ]
      },
      "authProviders": [
        {
          "key": "morph-idm-device",
          "type": "oauth2",
          "grantFlow": {
            "runtime": "v2",
            "domain": "morph-idm",
            "workflow": "device-login",
            "requiredToken": []
          },
          "tokenTypes": {
            "access": {
              "expiry": "infinite",
              "storage": {
                "context": "device",
                "key": "auth.token.morph-idm-device.access"
              }
            }
          }
        },
        {
          "key": "morph-idm-1fa",
          "type": "oauth2",
          "logout": {
            "endpoint": "/auth/logout/1fa"
          },
          "tokenTypes": {
            "access": {
              "expiry": "90d",
              "storage": {
                "context": "user",
                "key": "auth.token.morph-idm-1fa.access"
              }
            }
          }
        },
        {
          "key": "morph-idm-2fa",
          "type": "oauth2",
          "grantFlow": {
            "runtime": "v2",
            "domain": "morph-idm",
            "workflow": "mobile-login",
            "requiredToken": [
              { "provider": "morph-idm-1fa", "token": "access" },
              { "provider": "morph-idm-device", "token": "access" }
            ]
          },
          "logout": {
            "endpoint": "/auth/logout",
            "autoLogoutAtBackground": "5m",
            "autoLogoutAtInactivity": "15m"
          },
          "tokenTypes": {
            "access": {
              "expiry": "5m",
              "storage": {
                "context": "secureMemory",
                "key": "auth.token.morph-idm-2fa.access"
              }
            },
            "refresh": {
              "expiry": "30d",
              "endpoint": "/auth/token/refresh",
              "strategy": "rotating",
              "beforeExpiry": "1m",
              "storage": {
                "context": "user",
                "key": "auth.token.morph-idm-2fa.refresh"
              }
            }
          }
        },
        {
          "key": "edevlet",
          "type": "oauth2",
          "authorizationUrl": "https://giris.turkiye.gov.tr/OAuth2/authorize",
          "tokenUrl": "https://giris.turkiye.gov.tr/OAuth2/token",
          "clientId": "{{clientId}}",
          "scopes": [
            "profile",
            "tcno"
          ],
          "pkce": true,
          "tokenExchange": {
            "endpoint": "/auth/exchange/edevlet"
          },
          "logout": {
            "endpoint": "/auth/logout/edevlet"
          },
          "tokenTypes": {
            "access": {
              "expiry": "1h",
              "storage": {
                "context": "secureMemory",
                "key": "auth.token.edevlet.access"
              }
            },
            "refresh": {
              "expiry": "7d",
              "endpoint": "/auth/token/refresh",
              "strategy": "rotating",
              "beforeExpiry": "5m",
              "storage": {
                "context": "user",
                "key": "auth.token.edevlet.refresh"
              }
            }
          }
        }
      ]
    }
  ]
}
